(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{71:function(e,n,t){"use strict";t.r(n);var r,c=t(1),a=t(57),i=t.n(a),o=t(16),u=function(e){for(var n=[],t=e-1;t>=0;t--)n.push({x:t,y:0});return n},s={snake:u(10),dots:[{x:1,y:1}],setSnake:Object(o.b)((function(e,n){e.snake=n})),apples:[],setApples:Object(o.b)((function(e,n){e.apples=n}))};!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT",e.UP="UP",e.DOWN="DOWN"}(r||(r={}));var b,j,p,O,f={game:s},l=Object(o.c)(f),d=t(55),x=t(58),h=t(18),v=t(54),m=t(75),y=t(77),g=t(89),k=t(91),w=t(83),T=t(90),A=t(76),W=t(93),H=t(78),G=t(30),I=t(79),L=t(88),R=t(80),S=t(81),D=t(82),E=t(84),F=Object(o.d)(),U=F.useStoreActions,N=F.useStoreState,P=(F.useStoreDispatch,t(39)),M=t(46),B=t(74),C=M.a.div(b||(b=Object(P.a)(["\n  width: 10px;\n  height: 10px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  margin: 1px;\n  background-color: ",";\n"])),(function(e){return e.isHead?"green":e.isActive?"red":e.isApple?"blue":"transparent"})),J=t(9),$=Object(h.a)(Array(30)),q=function(e){var n=e.indexColumn,t=N((function(e){return e.game.snake})),r=N((function(e){return e.game.apples}));return t?Object(J.jsx)("div",{children:$.map((function(e,c){return Object(J.jsx)(C,{isActive:B.a({x:n,y:c},t),isApple:B.a({x:n,y:c},r),isHead:t[0].x===n&&t[0].y===c},c)}))}):null},z=Object(h.a)(Array(30)),K=function(){return Object(J.jsx)(Q,{tileWidth:10,children:z.map((function(e,n){return Object(J.jsx)(q,{indexColumn:n},n)}))})},Q=M.a.div(j||(j=Object(P.a)(["\n  display: flex;\n  max-width: ","px;\n  max-height: ","px;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"])),(function(e){return 30*(e.tileWidth+2+2)}),(function(e){return 30*(e.tileWidth+2+2)})),V=t(26),X=t(86),Y=t(60),Z=t(92),_=t(87),ee=t(85);!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT",e.UP="UP",e.DOWN="DOWN"}(p||(p={}));var ne=(O={},Object(V.a)(O,p.RIGHT,(function(e){return{x:e.x+1,y:e.y}})),Object(V.a)(O,p.LEFT,(function(e){return{x:e.x-1,y:e.y}})),Object(V.a)(O,p.UP,(function(e){return{x:e.x,y:e.y-1}})),Object(V.a)(O,p.DOWN,(function(e){return{x:e.x,y:e.y+1}})),O),te=function(e){var n=e.direction,t=e.pos;return ne[n](t)},re=[p.UP,p.DOWN],ce=[p.LEFT,p.RIGHT],ae=X.a(Y.a(0),Z.a,_.a(ce)),ie=X.a(Y.a(0),Z.a,_.a(re)),oe=function(e,n){var t=Math.ceil(e),r=Math.floor(n);return Math.floor(Math.random()*(r-t+1))+t},ue=function(e,n){return e.x===n.x&&e.y===n.y},se=function(e){for(var n=[],t=0;t<e;t++)n.push({x:oe(0,30),y:oe(0,30)});return n},be=Object(m.a)(document,"keydown").pipe(Object(A.a)("code")),je={ArrowUp:r.UP,ArrowDown:r.DOWN,ArrowLeft:r.LEFT,ArrowRight:r.RIGHT},pe=new y.a(10),Oe=function(e,n){return t=e,r=n,ee.a(ae,ie)([t,r])?e:n;var t,r},fe=pe.pipe(Object(W.a)((function(e,n){return n+e})),Object(H.a)()),le=be.pipe(Object(G.a)((function(e){return je[e]})),Object(I.a)((function(e){return!!e})),Object(L.a)(r.RIGHT),Object(R.a)()),de=new y.a(200).pipe(Object(S.a)((function(e){return Object(g.a)(e).pipe(Object(D.a)(le,(function(e,n){return{direction:n}})),Object(W.a)((function(e,n){var t=n.direction;return Oe(e,t)}),r.RIGHT))}))).pipe(Object(D.a)(fe,(function(e,n){return{move:e,snakeLength:n}})),Object(W.a)((function(e,n){var t=n.move,r=n.snakeLength,c=Object(v.a)(e),a=c[0],i=c.slice(1),o=a;return[te({direction:t,pos:a})].concat(Object(h.a)(i.map((function(e){var n=Object(x.a)({},o);return o=e,n}))),Object(h.a)(r>e.length?[e[e.length-1]]:[]))}),u(10)),Object(H.a)()),xe=de.pipe(Object(W.a)((function(e,n){var t=Object(d.a)(n,1)[0],r=e.find((function(e){return ue(e,t)}));return r?[].concat(Object(h.a)(_.a([r],e)),Object(h.a)(se(1))):e}),se(2)),Object(R.a)(),Object(H.a)()),he=fe.pipe(Object(L.a)(0),Object(W.a)((function(e,n){return e+1}))),ve=Object(k.a)([de,xe,he]).pipe(Object(G.a)((function(e){var n=Object(d.a)(e,3);return{snake:n[0],apples:n[1],score:n[2]}}))),me=Object(w.a)("Start Game").pipe(Object(G.a)((function(){return Object(g.a)(1e3/60,T.a)})),Object(S.a)((function(e){return e.pipe(Object(D.a)(ve,(function(e,n){return n})))})),Object(E.a)((function(e){return!ye(e)}))),ye=function(e){var n=e.snake,t=Object(v.a)(n),r=t[0],c=t.slice(1);return function(e){var n=e.x,t=e.y;return n>=30||n<0||t>=30||t<0}(r)||c.some((function(e){return ue(e,r)}))},ge=function(){var e=U((function(e){return{setSnake:e.game.setSnake,setApples:e.game.setApples}})),n=e.setSnake,t=e.setApples;return Object(c.useEffect)((function(){var e=me.subscribe((function(e){n(e.snake),t(e.apples)}));return function(){return e.unsubscribe()}})),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("h1",{children:"Snake"}),Object(J.jsx)(K,{})]})},ke=function(){return Object(J.jsx)(o.a,{store:l,children:Object(J.jsx)(ge,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(J.jsx)(ke,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[71,1,2]]]);
//# sourceMappingURL=main.07cd3abc.chunk.js.map