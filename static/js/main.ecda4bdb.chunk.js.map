{"version":3,"sources":["types.ts","utils/constants.ts","utils/positions.ts","utils/apples.ts","store/scene.ts","utils/snake.ts","store/game.tsx","store/index.tsx","components/Tile.tsx","components/Column.tsx","components/Grid.tsx","pages/Game.tsx","Root.tsx","serviceWorker.ts","index.tsx"],"names":["DIRECTION","MAP_POSITION","RIGHT","x","y","LEFT","UP","DOWN","moveToDirection","direction","pos","VERTICAL_DIRECTIONS","HORIZONTAL_DIRECTIONS","isOpossiteForVertical","R","isOpossiteForHorizontal","getRandomNumber","minimum","maximum","min","Math","ceil","max","floor","random","getRandomPosition","GRID_WIDTH","GRID_HEIGHT","equalPosition","p1","p2","hasPosition","p","positions","createApple","omitPositions","apple","initialSnake","length","snake","i","push","generateSnake","initialApples","count","apples","toOmit","generateApples","keys$","fromEvent","document","pipe","pluck","MAP_DIRECTION","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","length$","BehaviorSubject","nextDirection","prevDirection","newDirection","snakeLength$","scan","step","snakeLength","share","direction$","map","key","filter","startWith","distinctUntilChanged","snake$","switchMap","interval","withLatestFrom","_","lastDirection","move","head","tail","lastPosition","newPosition","apples$","eaten","find","a","withoutEaten","skip","tap","next","POINTS_PER_APPLE","subscribe","score$","score","scene$","combineLatest","game$","of","animationFrameScheduler","fps$","scene","takeWhile","isGameOver","isOverGrid","some","defaultStoreState","StoreStateContext","createContext","StoreProvider","children","useState","setScene","useEffect","sub","unsubscribe","Provider","value","useStoreState","useContext","Tile","styled","div","props","isHead","isActive","isApple","tiles","Array","Column","indexColumn","indexRow","rows","Grid","GridContainer","tileWidth","index","Game","Container","Title","ScoreInfo","h1","globalStyles","css","Root","styles","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ecda4bdb.chunk.js","sourcesContent":["export enum DIRECTION {\n  RIGHT = 'RIGHT',\n  LEFT = 'LEFT',\n  UP = 'UP',\n  DOWN = 'DOWN',\n}\nexport type Position = { x: number; y: number };\n","export const GRID_WIDTH = 15;\nexport const GRID_HEIGHT = 15;\nexport const SNAKE_LENGTH = 3;\nexport const APPLE_COUNT = 2;\nexport const TILE_SIZE = 20;\n","import * as R from 'ramda';\nimport { Position, DIRECTION } from '../types';\nimport { GRID_HEIGHT, GRID_WIDTH } from './constants';\n\nexport const positionZero: Position = { x: 0, y: 0 };\nexport const moveToDown = ({ x, y }: Position): Position => ({ x, y: y + 1 });\nexport const moveToUp = ({ x, y }: Position): Position => ({ x, y: y - 1 });\nexport const moveToLeft = ({ x, y }: Position): Position => ({ x: x - 1, y });\nexport const moveToRight = ({ x, y }: Position): Position => ({ x: x + 1, y });\n\nconst MAP_POSITION: Record<DIRECTION, (pos: Position) => Position> = {\n  [DIRECTION.RIGHT]: moveToRight,\n  [DIRECTION.LEFT]: moveToLeft,\n  [DIRECTION.UP]: moveToUp,\n  [DIRECTION.DOWN]: moveToDown,\n};\n\nexport const moveToDirection = ({\n  direction,\n  pos,\n}: {\n  direction: DIRECTION;\n  pos: Position;\n}): Position => MAP_POSITION[direction](pos);\n\nconst VERTICAL_DIRECTIONS = [DIRECTION.UP, DIRECTION.DOWN];\nconst HORIZONTAL_DIRECTIONS = [DIRECTION.LEFT, DIRECTION.RIGHT];\nexport const isOpossiteForVertical = R.compose(\n  R.equals(0),\n  R.length,\n  R.without(HORIZONTAL_DIRECTIONS),\n);\nexport const isOpossiteForHorizontal = R.compose(\n  R.equals(0),\n  R.length,\n  R.without(VERTICAL_DIRECTIONS),\n);\n\nexport const isOpposite = (direction: DIRECTION, newDirection: DIRECTION) =>\n  R.either(\n    isOpossiteForVertical,\n    isOpossiteForHorizontal,\n  )([direction, newDirection]);\n\nconst getRandomNumber = (minimum: number, maximum: number) => {\n  const min = Math.ceil(minimum);\n  const max = Math.floor(maximum);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const getRandomPosition = (): Position => ({\n  x: getRandomNumber(0, GRID_WIDTH - 1),\n  y: getRandomNumber(0, GRID_HEIGHT - 1),\n});\n\nexport const equalPosition = (p1: Position, p2: Position) =>\n  p1.x === p2.x && p1.y === p2.y;\n\nexport const hasPosition = (p: Position, positions: Position[]) =>\n  R.includes(p, positions);\n","import { Position } from '../types';\nimport { getRandomPosition, hasPosition } from './positions';\n\nexport function createApple(omitPositions: Position[]) {\n  let apple = getRandomPosition();\n  while (hasPosition(apple, omitPositions)) {\n    apple = getRandomPosition();\n  }\n  return apple;\n}\n\nexport const generateApples = (count: number, omitPositions: Position[]) => {\n  const apples = [];\n  const toOmit = [...omitPositions];\n  for (let i = 0; i < count; i++) {\n    const apple = createApple(toOmit);\n    apples.push(apple);\n    toOmit.push(apple);\n  }\n\n  return apples;\n};\n","import { interval, fromEvent, BehaviorSubject, combineLatest } from 'rxjs';\nimport {\n  pluck,\n  scan,\n  map,\n  switchMap,\n  withLatestFrom,\n  filter,\n  startWith,\n  distinctUntilChanged,\n  share,\n  skip,\n  tap,\n} from 'rxjs/operators';\nimport { moveToDirection, isOpposite, equalPosition } from '../utils/positions';\nimport { Position } from '../types';\nimport { SNAKE_LENGTH, APPLE_COUNT } from '../utils/constants';\nimport { createApple, generateApples } from '../utils/apples';\nimport { generateSnake } from '../utils/snake';\nimport * as R from 'ramda';\n\nexport const initialSnake = generateSnake(SNAKE_LENGTH);\nexport const initialApples = generateApples(APPLE_COUNT, initialSnake);\nexport enum DIRECTION {\n  RIGHT = 'RIGHT',\n  LEFT = 'LEFT',\n  UP = 'UP',\n  DOWN = 'DOWN',\n}\n\nconst keys$ = fromEvent<KeyboardEvent>(document, 'keydown').pipe(pluck('code'));\nconst MAP_DIRECTION: Record<string, DIRECTION> = {\n  ArrowUp: DIRECTION.UP,\n  ArrowDown: DIRECTION.DOWN,\n  ArrowLeft: DIRECTION.LEFT,\n  ArrowRight: DIRECTION.RIGHT,\n};\nconst length$ = new BehaviorSubject<number>(SNAKE_LENGTH);\n\nconst nextDirection = (prevDirection: DIRECTION, nextDirection: DIRECTION) =>\n  isOpposite(prevDirection, nextDirection) ? prevDirection : nextDirection;\n\nconst snakeLength$ = length$.pipe(\n  scan((step, snakeLength) => snakeLength + step),\n  share(),\n);\nconst direction$ = keys$.pipe(\n  map((key) => MAP_DIRECTION[key]),\n  filter((direction) => !!direction),\n  startWith(DIRECTION.RIGHT),\n  distinctUntilChanged(),\n);\n\nconst gameSpeed$ = new BehaviorSubject(200);\n\n// TEST for speed up\n// let increment = 1;\n// setInterval(() => {\n//   increment += 1;\n//   gameSpeed$.next(200 / increment);\n// }, 3000);\n\nconst move$ = gameSpeed$.pipe(\n  switchMap((i) =>\n    interval(i).pipe(\n      withLatestFrom(direction$, (_, direction) => ({\n        direction,\n      })),\n      scan(\n        (lastDirection, { direction }): DIRECTION =>\n          nextDirection(lastDirection, direction),\n        DIRECTION.RIGHT,\n      ),\n    ),\n  ),\n);\n\nconst moveSnake = (\n  snake: Position[],\n  { move, snakeLength }: { move: DIRECTION; snakeLength: number },\n): Position[] => {\n  const [head, ...tail] = snake;\n  let lastPosition = head;\n\n  return [\n    moveToDirection({ direction: move, pos: head }),\n    ...tail.map<Position>((pos) => {\n      const newPosition = { ...lastPosition };\n      lastPosition = pos;\n      return newPosition;\n    }),\n    ...(snakeLength > snake.length ? [snake[snake.length - 1]] : []),\n  ];\n};\n\nconst snake$ = move$.pipe(\n  withLatestFrom(snakeLength$, (move, snakeLength) => ({\n    move,\n    snakeLength,\n  })),\n  scan(moveSnake, initialSnake),\n  share(),\n);\n\nconst eat = (apples: Position[], snake: Position[]) => {\n  const [head] = snake;\n  const eaten = apples.find((a) => equalPosition(a, head));\n  if (eaten) {\n    const withoutEaten = R.without([eaten], apples);\n    return [...withoutEaten, createApple([...withoutEaten, ...snake])];\n  }\n  return apples;\n};\n\nconst apples$ = snake$.pipe(\n  scan(eat, initialApples),\n  distinctUntilChanged(),\n  share(),\n);\n\napples$\n  .pipe(\n    skip(1),\n    tap(() => length$.next(POINTS_PER_APPLE)),\n  )\n  .subscribe();\n\nconst POINTS_PER_APPLE = 1;\nconst score$ = snakeLength$.pipe(\n  startWith(0),\n  scan((score, _) => score + POINTS_PER_APPLE),\n);\nexport type Scene = {\n  snake: Position[];\n  apples: Position[];\n  score: number;\n};\n\nexport const scene$ = combineLatest([snake$, apples$, score$]).pipe<Scene>(\n  map(([snake, apples, score]) => ({ snake, apples, score })),\n);\n","import { Position } from '../types';\n\nexport const generateSnake = (length: number) => {\n  let snake: Position[] = [];\n\n  for (let i = length - 1; i >= 0; i--) {\n    snake.push({ x: i, y: 0 });\n  }\n\n  return snake;\n};\n","import { interval, of, animationFrameScheduler } from 'rxjs';\nimport { map, switchMap, withLatestFrom, takeWhile } from 'rxjs/operators';\nimport { equalPosition } from '../utils/positions';\nimport { Position } from '../types';\nimport { GRID_HEIGHT, GRID_WIDTH } from '../utils/constants';\nimport { scene$, Scene } from './scene';\n\nconst FPS = 60;\nexport const game$ = of('Start Game').pipe(\n  map(() => interval(1000 / FPS, animationFrameScheduler)),\n  switchMap((fps$) => fps$.pipe(withLatestFrom(scene$, (_, scene) => scene))),\n  takeWhile((scene) => !isGameOver(scene)),\n);\n\nconst isOverGrid = ({ x, y }: Position) =>\n  x >= GRID_WIDTH || x < 0 || y >= GRID_HEIGHT || y < 0;\n\nconst isGameOver = (scene: Scene) => {\n  const { snake } = scene;\n  const [head, ...tail] = snake;\n  return isOverGrid(head) || tail.some((p) => equalPosition(p, head));\n};\n","import { Scene } from './scene';\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport { game$ } from './game';\nimport { initialApples, initialSnake } from './scene';\n\nexport type StoreModel = Scene;\n\nconst defaultStoreState = {\n  snake: initialSnake,\n  apples: initialApples,\n  score: 0,\n};\nconst StoreStateContext = createContext<StoreModel>(defaultStoreState);\n\nexport const StoreProvider: React.FC = ({ children }) => {\n  const [scene, setScene] = useState(defaultStoreState);\n  useEffect(() => {\n    const sub = game$.subscribe((scene) => {\n      setScene(scene);\n    });\n    return () => sub.unsubscribe();\n  }, [setScene]);\n  return (\n    <StoreStateContext.Provider value={scene}>\n      {children}\n    </StoreStateContext.Provider>\n  );\n};\n\nexport const useStoreState = () => useContext(StoreStateContext);\n","import styled from '@emotion/styled';\nimport { TILE_SIZE } from '../utils/constants';\n\ntype Props = {\n  isActive: boolean;\n  isHead: boolean;\n  isApple: boolean;\n};\nexport const Tile = styled.div<Props>`\n  width: ${TILE_SIZE}px;\n  height: ${TILE_SIZE}px;\n  margin: 1px;\n  border-radius: 2px;\n  background-color: ${(props) =>\n    props.isHead\n      ? '#69D2E7'\n      : props.isActive\n      ? '#A7DBD8'\n      : props.isApple\n      ? '#F38630'\n      : 'transparent'};\n`;\n","import React from 'react';\nimport { GRID_WIDTH } from '../utils/constants';\nimport { useStoreState } from '../store';\nimport { Tile } from './Tile';\nimport { hasPosition, equalPosition } from '../utils/positions';\n\nconst tiles = [...Array(GRID_WIDTH)];\ntype Props = {\n  indexColumn: number;\n};\n\nexport const Column: React.FC<Props> = ({ indexColumn }) => {\n  const { snake, apples } = useStoreState();\n\n  if (!snake) {\n    return null;\n  }\n\n  return (\n    <div>\n      {tiles.map((_, indexRow) => {\n        const pos = { x: indexColumn, y: indexRow };\n        return (\n          <Tile\n            key={indexRow}\n            isActive={hasPosition(pos, snake)}\n            isApple={hasPosition(pos, apples)}\n            isHead={equalPosition(pos, snake[0])}\n          />\n        );\n      })}\n    </div>\n  );\n};\n","import React from 'react';\nimport styled from '@emotion/styled';\nimport { GRID_HEIGHT, GRID_WIDTH, TILE_SIZE } from '../utils/constants';\nimport { Column } from './Column';\n\nconst rows = [...Array(GRID_HEIGHT)];\nexport const Grid: React.FC = () => (\n  <GridContainer tileWidth={20}>\n    {rows.map((_, index) => (\n      <Column key={index} indexColumn={index}></Column>\n    ))}\n  </GridContainer>\n);\n\nconst GridContainer = styled.div<{\n  tileWidth: number;\n}>`\n  display: flex;\n  max-width: ${(TILE_SIZE + 2 + 2) * GRID_WIDTH}px;\n  max-height: ${(TILE_SIZE + 2 + 2) * GRID_HEIGHT}px;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 2px;\n  background-color: #fdfdfd;\n  border: 2px solid #f1f1f1;\n  border-radius: 5px;\n`;\n","import React from 'react';\nimport { useStoreState } from '../store';\nimport { Grid } from '../components/Grid';\nimport styled from '@emotion/styled';\n\nexport const Game: React.FC = () => {\n  const { score } = useStoreState();\n\n  return (\n    <Container>\n      <Title>Snake</Title>\n      <ScoreInfo>\n        Score: <strong>{score}</strong>\n      </ScoreInfo>\n      <Grid />\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst Title = styled.h1`\n  font-size: 3rem;\n`;\n\nconst ScoreInfo = styled.p`\n  font-size: 1.25rem;\n`;\n","import React from 'react';\nimport { css, Global } from '@emotion/react';\nimport { StoreProvider } from './store';\nimport { Game } from './pages/Game';\n\nconst globalStyles = css`\n  @import url('https://fonts.googleapis.com/css?family=Nunito:300,400,500,600,700&display=swap');\n  body {\n    margin: 0;\n    height: 100%;\n  }\n\n  html {\n    height: 100%;\n    font-family: 'Nunito', 'Helvetica', 'Arial', sans-serif;\n  }\n\n  #root {\n    height: 100%;\n  }\n`;\n\nconst Root: React.FC = () => (\n  <StoreProvider>\n    <Global styles={globalStyles} />\n    <Game />\n  </StoreProvider>\n);\n\nexport default Root;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './Root';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}