(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{72:function(e,n,t){"use strict";t.r(n);var r,c=t(1),a=t(57),i=t.n(a),u=t(17),o=t(16),s=t(26),b=t(88),j=t(61),p=t(94),O=t(89),f=t(87);!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT",e.UP="UP",e.DOWN="DOWN"}(r||(r={}));var l,d=(l={},Object(s.a)(l,r.RIGHT,(function(e){return{x:e.x+1,y:e.y}})),Object(s.a)(l,r.LEFT,(function(e){return{x:e.x-1,y:e.y}})),Object(s.a)(l,r.UP,(function(e){return{x:e.x,y:e.y-1}})),Object(s.a)(l,r.DOWN,(function(e){return{x:e.x,y:e.y+1}})),l),x=function(e){var n=e.direction,t=e.pos;return d[n](t)},h=[r.UP,r.DOWN],v=[r.LEFT,r.RIGHT],m=b.a(j.a(0),p.a,O.a(v)),y=b.a(j.a(0),p.a,O.a(h)),g=function(e,n){var t=Math.ceil(e),r=Math.floor(n);return Math.floor(Math.random()*(r-t+1))+t},k=function(){return{x:g(0,29),y:g(0,29)}},w=function(e,n){return e.x===n.x&&e.y===n.y},T=t(75);function A(e){for(var n=k();T.a(n,e);)n=k();return n}var S,W=function(e){for(var n=[],t=e-1;t>=0;t--)n.push({x:t,y:0});return n}(10),H=function(e,n){for(var t=[],r=Object(o.a)(n),c=0;c<e;c++){var a=A(r);t.push(a),r.push(a)}return t}(2,W),G={snake:W,setSnake:Object(u.b)((function(e,n){e.snake=n})),apples:H,setApples:Object(u.b)((function(e,n){e.apples=n}))};!function(e){e.RIGHT="RIGHT",e.LEFT="LEFT",e.UP="UP",e.DOWN="DOWN"}(S||(S={}));var I,L,R={game:G},D=Object(u.c)(R),E=t(36),F=Object(u.d)(),U=F.useStoreActions,N=F.useStoreState,P=(F.useStoreDispatch,t(41)),M=t(47),B=M.a.div(I||(I=Object(P.a)(["\n  width: 10px;\n  height: 10px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  margin: 1px;\n  background-color: ",";\n"])),(function(e){return e.isHead?"green":e.isActive?"red":e.isApple?"blue":"transparent"})),C=t(9),J=Object(o.a)(Array(30)),$=function(e){var n=e.indexColumn,t=N((function(e){return e.game.snake})),r=N((function(e){return e.game.apples}));return t?Object(C.jsx)("div",{children:J.map((function(e,c){return Object(C.jsx)(B,{isActive:T.a({x:n,y:c},t),isApple:T.a({x:n,y:c},r),isHead:t[0].x===n&&t[0].y===c},c)}))}):null},q=Object(o.a)(Array(30)),z=function(){return Object(C.jsx)(K,{tileWidth:10,children:q.map((function(e,n){return Object(C.jsx)($,{indexColumn:n},n)}))})},K=M.a.div(L||(L=Object(P.a)(["\n  display: flex;\n  max-width: ","px;\n  max-height: ","px;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n"])),(function(e){return 30*(e.tileWidth+2+2)}),(function(e){return 30*(e.tileWidth+2+2)})),Q=t(59),V=t(56),X=t(76),Y=t(78),Z=t(91),_=t(93),ee=t(85),ne=t(92),te=t(77),re=t(95),ce=t(79),ae=t(30),ie=t(60),ue=t(90),oe=t(80),se=t(81),be=t(82),je=t(83),pe=t(84),Oe=t(86),fe=Object(X.a)(document,"keydown").pipe(Object(te.a)("code")),le={ArrowUp:S.UP,ArrowDown:S.DOWN,ArrowLeft:S.LEFT,ArrowRight:S.RIGHT},de=new Y.a(10),xe=function(e,n){return t=e,r=n,f.a(m,y)([t,r])?e:n;var t,r},he=de.pipe(Object(re.a)((function(e,n){return n+e})),Object(ce.a)()),ve=fe.pipe(Object(ae.a)((function(e){return le[e]})),Object(ie.a)((function(e){return!!e})),Object(ue.a)(S.RIGHT),Object(oe.a)()),me=new Y.a(200).pipe(Object(se.a)((function(e){return Object(Z.a)(e).pipe(Object(be.a)(ve,(function(e,n){return{direction:n}})),Object(re.a)((function(e,n){var t=n.direction;return xe(e,t)}),S.RIGHT))}))).pipe(Object(be.a)(he,(function(e,n){return{move:e,snakeLength:n}})),Object(re.a)((function(e,n){var t=n.move,r=n.snakeLength,c=Object(V.a)(e),a=c[0],i=c.slice(1),u=a;return[x({direction:t,pos:a})].concat(Object(o.a)(i.map((function(e){var n=Object(Q.a)({},u);return u=e,n}))),Object(o.a)(r>e.length?[e[e.length-1]]:[]))}),W),Object(ce.a)()),ye=me.pipe(Object(re.a)((function(e,n){var t=Object(E.a)(n,1)[0],r=e.find((function(e){return w(e,t)}));if(r){var c=O.a([r],e);return[].concat(Object(o.a)(c),[A(c)])}return e}),H),Object(oe.a)(),Object(ce.a)());ye.pipe(Object(je.a)(1),Object(pe.a)((function(){return de.next(ge)}))).subscribe();var ge=1,ke=he.pipe(Object(ue.a)(0),Object(re.a)((function(e,n){return e+ge}))),we=Object(_.a)([me,ye,ke]).pipe(Object(ae.a)((function(e){var n=Object(E.a)(e,3);return{snake:n[0],apples:n[1],score:n[2]}}))),Te=Object(ee.a)("Start Game").pipe(Object(ae.a)((function(){return Object(Z.a)(1e3/60,ne.a)})),Object(se.a)((function(e){return e.pipe(Object(be.a)(we,(function(e,n){return n})))})),Object(Oe.a)((function(e){return!Ae(e)}))),Ae=function(e){var n=e.snake,t=Object(V.a)(n),r=t[0],c=t.slice(1);return function(e){var n=e.x,t=e.y;return n>=30||n<0||t>=30||t<0}(r)||c.some((function(e){return w(e,r)}))},Se=function(){var e=U((function(e){return{setSnake:e.game.setSnake,setApples:e.game.setApples}})),n=e.setSnake,t=e.setApples,r=Object(c.useState)(0),a=Object(E.a)(r,2),i=a[0],u=a[1];return Object(c.useEffect)((function(){var e=Te.subscribe((function(e){n(e.snake),t(e.apples),u(e.score)}));return function(){return e.unsubscribe()}}),[n,t,u]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:"Snake"}),"Score: ",i,Object(C.jsx)(z,{})]})},We=function(){return Object(C.jsx)(u.a,{store:D,children:Object(C.jsx)(Se,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(C.jsx)(We,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[72,1,2]]]);
//# sourceMappingURL=main.1bf1a2de.chunk.js.map